---
title: "Responses to Week Three Assignment"
author: "Hiroshi Suzuki"
date: "`r Sys.Date()`"
output:
  html_notebook: default
---

## Week Three Assignment

Choose two WDI codes and analyse the data.

-   Create an R Notebook of a Data Analysis containing the following and submit the rendered file (eg. `w3_g123456.nb.html`)

    1.  create an R Notebook using the R Notebook Template in Moodle, save as `w3_g123456.Rmd`,

    2.  edit author with name, ID, and title

    3.  contents should include the following:

        -   A short abstract

        -   Explanation of data including data name, data code (or id), and description

        -   Many of the following: a bar graph (or a column graph), a histogram, a boxplot, a line graph, a scatter plot

        -   Observations or questions for visualizations

    4.  run each code block, preview to create `w3_g123456.nb.html`,

    5.  submit `w3_123456.nb.html` to Moodle.

Submit your R Notebook file (w3_g123456.nb.html) in Moodle (Week Three Assignment).

***Due: Sunday 14, January 2024, 11:59 PM***

# Your Project

## Title of your project

*The title can be in the title in YAML.*

### Short Abstract

We study .....

### About Data

#### List of Indicators chosen:

1.  Agricultural Land: AG.LND.AGRI.ZS, Forest Area: AG.LND.FRST.ZS

2.  Agricultural land (sq. km)：AG.LND.AGRI.K2, Forest area (sq. km)：AG.LND.FRST.K2

3.  Forest area (% of land area): AG.LND.FRST.ZS, Population growth (annual %): SP.POP.GROW

4.  Capture fisheries production (metric tons): ER.FSH.CAPT.MT, Aquaculture production (metric tons): ER.FSH.AQUA.MT

5.  Individuals using the Internet (% of population): IT.NET.USER.ZS, Literacy rate, youth total (% of people ages 15-24): SE.ADT.1524.LT.ZS

6.  Individuals using the Internet (% of population): IT.NET.USER.ZS, Secure Internet servers (per 1 million people): IT.NET.SECR.P6

7.  GDP Growth Rate Indicator: NY.GDP.MKTP.KD.ZG, Gross Domestic Product Indicator: NY.GDP.MKTP.CD

8.  GDP growth (annual %): NY.GDP.MKTP.KD.ZG, Military expenditure (% of GDP): MS.MIL.XPND.GD.ZS

9.  Urban population ratio: SP.URB.TOTL.IN.ZS, Total fertility rate: SP.DYN.TFRT.IN

10. Fertility rate, total (births per woman): SP.DYN.TFRT.IN, GDP per capita, PPP (constant 2017 international \$): NY.GDP.PCAP.PP.KD

11. Population growth (annual %): SP.POP.GROW, GDP per capita, PPP (constant 2017 international \$): NY.GDP.PCAP.PP.KD

12. Population Growth Rate (SE.POP.GROW), GDP per capita (current US\$) (NY.GDP.PCAP.CD)

13. Life expectancy at birth, female (years): SP.DYN.LE00.FE.IN, GDP per capita, PPP (current international \$): NY.GDP.PCAP.PP.KD

14. GDP (US\$): NY.GDP.MKTP.CD, Adolescent fertility rate (births per 1,000 women ages 15-19): SP.ADO.TFRT

15. GDP: NY.GDP.MKTP.CD, Air Transport, Passengers Carried in the World: IS.AIR.PSGR

16. GNI per capita, Atlas method (current US\$): NY.GNP.PCAP.CD, Foreign direct investment, net inflows (BoP, current US\$): BX.KLT.DINV.CD.WD

17. Stocks traded, turnover ratio of domestic shares (%) : CM.MKT.TRNR, GDP per capita, PPP (constant 2017 international \$): NY.GDP.PCAP.PP.KD

18. Unemployment Rate (% of total work force) : SL.UEM.TOTL.ZS, Access to electricity : EG.ELC.ACCS.ZS

19. Labor force participation rate, total (% of total population ages 15+) (modeled ILO estimate): SL.TLF.CACT.ZS, Mortality rate, under-5 (per 1,000 live births): SH.DYN.MORT

20. Literacy rate, adult female (% of females 15 and above): SE.ADT.LITR.FE.ZS, Fertility rate, total (births per woman): SP.DYN.TFRT.IN

21. School enrollment, primary and secondary (gross), gender parity index (GPI): SE.ENR.PRSC.FM.ZS, Maternal mortality ratio (modeled estimate, per 100,000 live births): SH.STA.MMRT

22. Co2 emission: EN.ATM.CO2E.PC, GDP: NY.GDP.MKTP.CD

#### Information of Indicators

*Keep a record of the basic information: the name of the indicator, the indicator code, and its description. In your abstract, you need to provide the name of the indicator; you need the indicator code to download the data. You also need to check the description when you make an observation.*

*You can get the description using the WDIsearch() as well. See below.*

1.  Name of the indicator 1: Indicator Code 1

-   Description:

2.  Name of the indicator 2: Indicator Code 2

-   Description:

### Set up

*Initially, be sure to create a project and open an existing one.*

```{r}
library(tidyverse)
library(WDI)
```

*Create a data folder if you do not have it under Files.*

```{r eval=FALSE}
dir.create("data")
```

*You need the updated WDI cache to use extra data information by `extra = TRUE.` `WDIsearch()` works quickly if you add `cache = wdicache.`*

*If you do not have `wdicache.rds` in your data folder, run the following two code chunks.*

```{r wdicache, eval=FALSE}
wdicache <- WDIcache()
```

```{r writewdicache, eval=FALSE, echo=FALSE}
write_rds(wdicache, "data/wdicache.rds")
```

```{r readwdicache, echo=FALSE}
wdicache <- read_rds("data/wdicache.rds")
```

*WDIsearch() is to help you search the indicator. Following the steps, you can also get the indicator's name and description.*

```{r}
WDIsearch(string = "AG.LND.AGRI.ZS", field = "indicator", short = FALSE, cache = wdicache)
```

```{r}
WDIsearch(string = "forest area", field = "name", short = FALSE, cache = wdicache)
```

### Importing Data

*If you edit the following code chunk by replacing "SE.SEC.ENRR," 'sec,' "NY.GDP.PCAP.PP.KD," and 'gdppcap' with your choice, you can download the data without changing the next code chunk. If you edit the next code chunk by replacing short_name_1 and short_name_2 with your choice of short names, then you must change all the following chunks, including short_name_1 and short_name_2.*

```{=html}
<span style = "color: red;">Edit the following code chunk!</span>
```
```{r}
chosen_indicator_1 <- "SE.SEC.ENRR" #example
short_name_1 <- 'sec'
chosen_indicator_2 <- "NY.GDP.PCAP.PP.KD" #example
short_name_2 <- 'gdppcap'
```

Run the following in the beginning.

*You can download two indicator codes simultaneously to include them in your df_yourdata with column names: short_name_1 and short_name_2. If you change the data object name `df_yourdata`*, *you must change the same with the following code chunks with `df_yourdata.

```{r}
df_yourdata <- WDI(
  indicator = c(short_name_1 = chosen_indicator_1,
                short_name_2 = chosen_indicator_2),
  extra = TRUE, cache = wdicache)
```

```{r}
write_csv(df_yourdata, "data/yourdata.csv")
```

```{r}
df_yourdata <- read_csv("data/yourdata.csv")
```

```{r}
df_yourdata
```

```{r}
str(df_yourdata)
```

<!-- ### Visualization by Line Graphs -->

<!-- #### Name of the Indicator 1 -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title and the label of y-axis.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- COUNTRY <- "World" -->

<!-- df_yourdata |> filter(country == COUNTRY) |> drop_na(short_name_1) |> -->

<!--   ggplot(aes(year, short_name_1)) + geom_line() + -->

<!--   labs(title = "", -->

<!--        y = "") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit ISO2C, title, subtitle, and the label of y-axis.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- ISO2C <- c("JP", "CN", "ID", "GB", "US", "DE", "FR") -->

<!-- df_yourdata |> filter(iso2c %in% ISO2C) |>  -->

<!--   drop_na(short_name_1) |> -->

<!--   ggplot(aes(year, short_name_1, col = iso2c)) +  -->

<!--   geom_line() + -->

<!--   labs(title = "", -->

<!--        subtitle = "China, Germany, France, United Kingdom, India, Japan, United States",  -->

<!--        y = "") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- #### Name of the Indicator 2 -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit COUNTRY and the title.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- COUNTRY <- "World" -->

<!-- df_yourdata |> filter(country == COUNTRY) |> drop_na(short_name_2) |> -->

<!--   ggplot(aes(year, short_name_2)) + geom_line() + -->

<!--   labs(title = "") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit ISO2C, title, subtitle, and the label of y-axis, and add caption if preferable.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- ISO2C <- c("JP", "CN", "ID", "GB", "US", "DE", "FR") -->

<!-- df_yourdata |> filter(iso2c %in% ISO2C) |> drop_na(short_name_2) |> -->

<!--   ggplot(aes(year, short_name_2, col = iso2c)) +  -->

<!--   geom_line() + -->

<!--   labs(title = "", -->

<!--        subtitle = "China, Germany, France, United Kingdom, India, Japan, United States",  -->

<!--        y = "", -->

<!--        caption = "") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

### Ranking

*There are two similar code chunks. One has `arrange(desc(short_name_1))` at the end, and the other has `arrange(short_name_1)`. The `arrange(desc(short_name_1))` arranges the data in descending order, and `arrange(short_name_1)` in ascending order, i.e., the default is from small to large.*

```{=html}
<span style = "color: red;">Edit year if necessary.</span>
```
```{r}
df_yourdata |> filter(year == 2020) |> 
  filter(region != "Aggregates") |>
  drop_na(short_name_1) |> arrange(desc(short_name_1))
```

```{r}
df_yourdata |> filter(year == 2020) |> 
  filter(region != "Aggregates") |>
  drop_na(short_name_1) |> arrange(short_name_1)
```

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- #### Ranking of the Indicator 2 -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |>  -->

<!--   filter(region != "Aggregates") |> -->

<!--   drop_na(short_name_2) |> arrange(desc(short_name_2)) -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |>  -->

<!--   filter(region != "Aggregates") |> -->

<!--   drop_na(short_name_2) |> arrange(short_name_2) -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

### Histograms and Boxplots for Variation

-   What is a histogram? [[video](https://vimeo.com/221607341)]

-   What is a boxplot? [[video](https://vimeo.com/222358034)]

<!-- #### Name of the Indicator 1 -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title and year.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- INCOME <-c("Low income", "Lower middle income", "Upper middle income",  -->

<!-- "High income") -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |>  -->

<!--   filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_1) |> filter(income != "Not classified") |> -->

<!--   ggplot(aes(short_name_1, fill = factor(income, levels = INCOME))) + geom_histogram(bins = 15, col = "black", linewidth = 0.1) +  -->

<!--   scale_x_log10() + -->

<!--   labs(title = "", fill = "") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title and the years.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year %in% c(1990, 2000, 2010, 2020)) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_1) |> filter(short_name_1 > 0) |> filter(income != "Not classified") |>  -->

<!--   ggplot(aes(short_name_1, fill = factor(year))) +  -->

<!--   geom_histogram(bins = 15, col = "black", linewidth = 0.1) +  -->

<!--   scale_x_log10() + facet_wrap(~year) + -->

<!--   labs(title = "", fill = "") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year %in% c(1990, 2000, 2010, 2020)) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_1) |> filter(short_name_1 > 0) |> filter(income != "Not classified") |>  -->

<!--   ggplot(aes(short_name_1, factor(year), fill = factor(year))) +  -->

<!--   geom_boxplot() + scale_x_log10() + labs(y = "") + theme(legend.position = "none") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title, and the year if necessary.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_1) |> filter(short_name_1 > 0) |> filter(income != "Not classified") |>  -->

<!--   ggplot(aes(short_name_1, factor(income, levels = INCOME), fill = income)) +  -->

<!--   geom_boxplot() + scale_x_log10() +  -->

<!--   labs(title = "", y = "", fill = "") + -->

<!--   theme(legend.position = "none") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title and year if necessary.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_1) |> filter(short_name_1 > 0) |>  -->

<!--   ggplot(aes(short_name_1, region, fill = region)) +  -->

<!--   geom_boxplot() + scale_x_log10() +  -->

<!--   labs(title = "", y = "", fill = "") + -->

<!--   theme(legend.position = "none") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- #### GDP per capita -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title, and year if necessary.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_2) |> filter(income != "Not classified") |> -->

<!--   ggplot(aes(short_name_2, fill = factor(income, levels = INCOME))) + geom_histogram(bins = 15, col = "black", linewidth = 0.1) +  -->

<!--   scale_x_log10() + -->

<!--   labs(title = "", fill = "") -->

<!-- ``` -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title and the year if necessary.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year %in% c(1990, 2000, 2010, 2020)) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_2) |> filter(short_name_2 > 0) |> filter(income != "Not classified") |>  -->

<!--   ggplot(aes(short_name_2, fill = factor(year))) +  -->

<!--   geom_histogram(bins = 15, col = "black", linewidth = 0.1) +  -->

<!--   scale_x_log10() + facet_wrap(~year) + -->

<!--   labs(title = "", fill = "") + -->

<!--   theme(legend.position = "none") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year %in% c(1990, 2000, 2010, 2020)) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_2) |> filter(short_name_2 > 0) |> filter(income != "Not classified") |>  -->

<!--   ggplot(aes(short_name_2, factor(year), fill = factor(year))) +  -->

<!--   geom_boxplot() + scale_x_log10() + labs(y = "") + theme(legend.position = "none") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title, and the year if necessary.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_2) |> filter(short_name_2 > 0) |> filter(income != "Not classified") |>  -->

<!--   ggplot(aes(short_name_2, factor(income, levels = INCOME), fill = income)) +  -->

<!--   geom_boxplot() + scale_x_log10() +  -->

<!--   labs(title = "", y = "", fill = "") + -->

<!--   theme(legend.position = "none") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title and the year if necessary.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |> filter(region != "Aggregates") |>  -->

<!--   drop_na(short_name_2) |> filter(short_name_2 > 0) |>  -->

<!--   ggplot(aes(short_name_2, region, fill = region)) +  -->

<!--   geom_boxplot() + scale_x_log10() +  -->

<!--   labs(title = "", y = "", fill = "") + -->

<!--   theme(legend.position = "none") -->

<!-- ``` -->

<!-- ### Scatterplot for Covariation -->

<!-- #### Scatterplot with a regression line -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit the title, the labels of x- and y- axes.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |>  -->

<!--   drop_na(short_name_2, short_name_1) |> -->

<!--   ggplot(aes(short_name_2, short_name_1)) + geom_point(aes(col = region)) + -->

<!--   geom_smooth(method = "lm", formula = 'y~x', se = FALSE) + -->

<!--   scale_x_log10() + scale_y_log10() + -->

<!--   labs(title = "", -->

<!--        x = "", -->

<!--        y = "") -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- #### Summary of a linear model -->

<!-- ```{=html} -->

<!-- <span style = "color: red;">Edit year if necessary.</span> -->

<!-- ``` -->

<!-- ```{r} -->

<!-- df_yourdata |> filter(year == 2020) |> drop_na(short_name_2, short_name_1) |> -->

<!--   lm(log10(short_name_1)~log10(short_name_2), data = _) |> summary() -->

<!-- ``` -->

<!-- **Observations and Questions:** -->

<!-- -    -->

<!-- -    -->
