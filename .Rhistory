ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "世界の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("BD", "BR", "CN", "ID", "NG", "JP")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("US", "GB", "CN", "DE", "FR", "JP", "IN")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", col = "", linetype = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country, 2,4) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Japan") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "日本の出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Germany") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "ドイツの出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) + geom_line() +
labs(title = "ドイツと日本の出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name == "pop") |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country)) + geom_line() +
labs(title = "ドイツと日本の人口")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) + geom_line() +
labs(title = "ドイツと日本の出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/ges001/ges00101.Rmd")
library(tidyverse)
library(WDI)
library(showtext)
showtext_auto(FALSE)
showtext_auto() # for slides etc remove #
df_pop <- WDI(indicator = c(pop = "SP.POP.TOTL"))
df_pop
df_pop_related <- read_csv("data/pop_related.csv")
head(df_pop_related)
str(df_pop_related[])
REGION <- c("1A", "1W", "4E", "7E", "8S", "B8", "EU", "F1", "OE", "S1",
"S2", "S3", "S4", "T2", "T3", "T4", "T5", "T6", "T7", "V1", "V2",
"V3", "V4", "XC", "XD", "XE", "XF", "XG", "XH", "XI", "XJ", "XL",
"XM", "XN", "XO", "XP", "XQ", "XT", "XU", "XY", "Z4", "Z7", "ZF",
"ZG", "ZH", "ZI", "ZJ", "ZQ", "ZT")
df_pop |> filter(iso2c %in% REGION) |> distinct(country, iso2c)
df_pop |> filter(!(iso2c %in% REGION)) |>
distinct(country, iso2c) |> arrange(country)
df_pop |> filter(country == "World") |>
ggplot(aes(year, pop)) + geom_line() +
labs(title = "世界の総人口")
df_pop |> filter(country == "Japan") |>
ggplot(aes(year, pop)) + geom_line() +
labs(title = "日本の総人口")
df_pop |> filter(!(iso2c %in% REGION)) |> filter(year == 2022) |>
arrange(desc(pop))
pop_top11 <- df_pop |> filter(!(iso2c %in% REGION)) |> filter(year == 2022) |>
arrange(desc(pop)) |> slice_head(n=11) |> pull(iso2c)
pop_top11
dput(pop_top11)
df_pop |> filter(iso2c %in% pop_top11) |>
ggplot(aes(year, pop, color = iso2c)) + geom_line() + labs(title = "TOP11の総人口")
df_pop |> filter(iso2c %in% pop_top11) |>
filter(!(iso2c %in% c("CN", "IN"))) |>
ggplot(aes(year, pop, color = country)) + geom_line() +
labs(title = "中国とインド以外のTOP11の総人口")
df_pop |> filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, pop, color = country)) + geom_line() + labs(title = "地域ごとの総人口")
df_pop_long <- df_pop_related |>
pivot_longer(pop:old, names_to = "name", values_to = "value")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(country == "World") |> drop_na(value) |> # NA value を削除
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "出生率、死亡率（1000人当たり）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(iso2c %in% c("BD", "BR", "CN", "ID", "NG", "JP")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の、出生率、死亡率（1000人当たり）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(iso2c %in% c("Z4", "Z7", "ZJ", "ZQ", "XU", "8S", "ZG")) |> drop_na() |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "地域ごとの出生率・死亡率（1000人あたり）")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country == "World") |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "世界の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("BD", "BR", "CN", "ID", "NG", "JP")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("US", "GB", "CN", "DE", "FR", "JP", "IN")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line()　+ labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", col = "", linetype = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country, 2,4) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Japan") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "日本の出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Germany") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "ドイツの出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) + geom_line() +
labs(title = "ドイツと日本の出生率・死亡率\n労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name == "pop") |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country)) + geom_line() +
labs(title = "ドイツと日本の人口")
df_pop <- WDI(indicator = c(pop = "SP.POP.TOTL"))
write_csv(df_pop, "data/pop.csv")
library(tidyverse)
library(WDI)
library(showtext)
showtext_auto(FALSE)
showtext_auto() # for slides etc remove #
df_pop <- read_csv("data/pop.csv")
df_pop
df_pop_related <- read_csv("data/pop_related.csv")
head(df_pop_related)
str(df_pop_related[])
REGION <- c("1A", "1W", "4E", "7E", "8S", "B8", "EU", "F1", "OE", "S1",
"S2", "S3", "S4", "T2", "T3", "T4", "T5", "T6", "T7", "V1", "V2",
"V3", "V4", "XC", "XD", "XE", "XF", "XG", "XH", "XI", "XJ", "XL",
"XM", "XN", "XO", "XP", "XQ", "XT", "XU", "XY", "Z4", "Z7", "ZF",
"ZG", "ZH", "ZI", "ZJ", "ZQ", "ZT")
df_pop |> filter(iso2c %in% REGION) |> distinct(country, iso2c)
df_pop |> filter(!(iso2c %in% REGION)) |>
distinct(country, iso2c) |> arrange(country)
df_pop |> filter(country == "World") |>
ggplot(aes(year, pop)) + geom_line() +
labs(title = "世界の総人口")
df_pop |> filter(country == "Japan") |>
ggplot(aes(year, pop)) + geom_line() +
labs(title = "日本の総人口")
df_pop |> filter(!(iso2c %in% REGION)) |> filter(year == 2022) |>
arrange(desc(pop))
pop_top11 <- df_pop |> filter(!(iso2c %in% REGION)) |> filter(year == 2022) |>
arrange(desc(pop)) |> slice_head(n=11) |> pull(iso2c)
pop_top11
dput(pop_top11)
df_pop |> filter(iso2c %in% pop_top11) |>
ggplot(aes(year, pop, color = iso2c)) + geom_line() + labs(title = "TOP11の総人口")
df_pop |> filter(iso2c %in% pop_top11) |>
filter(!(iso2c %in% c("CN", "IN"))) |>
ggplot(aes(year, pop, color = country)) + geom_line() +
labs(title = "中国とインド以外のTOP11の総人口")
df_pop |> filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, pop, color = country)) + geom_line() + labs(title = "地域ごとの総人口")
df_pop_long <- df_pop_related |>
pivot_longer(pop:old, names_to = "name", values_to = "value")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(country == "World") |> drop_na(value) |> # NA value を削除
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "出生率、死亡率（1000人当たり）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(iso2c %in% c("BD", "BR", "CN", "ID", "NG", "JP")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の、出生率、死亡率（1000人当たり）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(iso2c %in% c("Z4", "Z7", "ZJ", "ZQ", "XU", "8S", "ZG")) |> drop_na() |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "地域ごとの出生率・死亡率（1000人あたり）")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country == "World") |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "世界の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("BD", "BR", "CN", "ID", "NG", "JP")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("US", "GB", "CN", "DE", "FR", "JP", "IN")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line()　+ labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", col = "", linetype = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country, 2,4) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Japan") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "日本の出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Germany") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "ドイツの出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) + geom_line() +
labs(title = "ドイツと日本の出生率・死亡率\n労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name == "pop") |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country)) + geom_line() +
labs(title = "ドイツと日本の人口")
library(tidyverse)
library(WDI)
library(showtext)
showtext_auto(FALSE)
# showtext_auto() # for slides etc remove #
df_pop <- read_csv("data/pop.csv")
df_pop
df_pop_related <- read_csv("data/pop_related.csv")
head(df_pop_related)
str(df_pop_related[])
REGION <- c("1A", "1W", "4E", "7E", "8S", "B8", "EU", "F1", "OE", "S1",
"S2", "S3", "S4", "T2", "T3", "T4", "T5", "T6", "T7", "V1", "V2",
"V3", "V4", "XC", "XD", "XE", "XF", "XG", "XH", "XI", "XJ", "XL",
"XM", "XN", "XO", "XP", "XQ", "XT", "XU", "XY", "Z4", "Z7", "ZF",
"ZG", "ZH", "ZI", "ZJ", "ZQ", "ZT")
df_pop |> filter(iso2c %in% REGION) |> distinct(country, iso2c)
df_pop |> filter(!(iso2c %in% REGION)) |>
distinct(country, iso2c) |> arrange(country)
df_pop |> filter(country == "World") |>
ggplot(aes(year, pop)) + geom_line() +
labs(title = "世界の総人口")
df_pop |> filter(country == "Japan") |>
ggplot(aes(year, pop)) + geom_line() +
labs(title = "日本の総人口")
df_pop |> filter(!(iso2c %in% REGION)) |> filter(year == 2022) |>
arrange(desc(pop))
pop_top11 <- df_pop |> filter(!(iso2c %in% REGION)) |> filter(year == 2022) |>
arrange(desc(pop)) |> slice_head(n=11) |> pull(iso2c)
pop_top11
dput(pop_top11)
df_pop |> filter(iso2c %in% pop_top11) |>
ggplot(aes(year, pop, color = iso2c)) + geom_line() + labs(title = "TOP11の総人口")
df_pop |> filter(iso2c %in% pop_top11) |>
filter(!(iso2c %in% c("CN", "IN"))) |>
ggplot(aes(year, pop, color = country)) + geom_line() +
labs(title = "中国とインド以外のTOP11の総人口")
df_pop |> filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, pop, color = country)) + geom_line() + labs(title = "地域ごとの総人口")
df_pop_long <- df_pop_related |>
pivot_longer(pop:old, names_to = "name", values_to = "value")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(country == "World") |> drop_na(value) |> # NA value を削除
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "出生率、死亡率（1000人当たり）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(iso2c %in% c("BD", "BR", "CN", "ID", "NG", "JP")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の、出生率、死亡率（1000人当たり）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate")) |>
filter(iso2c %in% c("Z4", "Z7", "ZJ", "ZQ", "XU", "8S", "ZG")) |> drop_na() |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "地域ごとの出生率・死亡率（1000人あたり）")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country == "World") |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "世界の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("BD", "BR", "CN", "ID", "NG", "JP")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(iso2c %in% c("US", "GB", "CN", "DE", "FR", "JP", "IN")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line()　+ labs(title = "国々の高齢者・若年者扶養率")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", col = "", linetype = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("young", "old")) |>
filter(country %in% c("South Asia", "Europe & Central Asia", "Middle East & North Africa",
"East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean", "North America")) |>
ggplot(aes(year, value, col = country, linetype = name)) +
geom_line() + facet_wrap(~country, 2,4) + theme(legend.position = "none") +
labs(title = "地域別の労働人口に対する高齢・若年扶養率（％）",
subtitle = "実線：高齢者、点線：若年者", x = "", y = "")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Japan") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "日本の出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country == "Germany") |> drop_na(value) |>
ggplot(aes(year, value, col = name)) + geom_line() +
labs(title = "ドイツの出生率・死亡率・労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name %in% c("birth_rate", "death_rate", "young", "old")) |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country, linetype = name)) + geom_line() +
labs(title = "ドイツと日本の出生率・死亡率\n労働人口に対する高齢・若年扶養率（％）")
df_pop_long |> filter(name == "pop") |>
filter(country  %in%  c("Germany", "Japan")) |> drop_na(value) |>
ggplot(aes(year, value, col = country)) + geom_line() +
labs(title = "ドイツと日本の人口")
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/ges001/ges00101.Rmd")
library(tidyverse)
library(WDI)
df_wdi_life <- read_csv("data/wdi_life.csv")
head(df_wdi_life)
str(df_wdi_life)
df_life <- df_wdi_life |> select(c("country", "iso2c", "year", "life_expectancy", "fertility_rate", "population", "region", "income"))
head(df_life)
df_life$region |> unique()
df_life$income |> unique()
df_life |> filter(region == "Aggregates") |> distinct(country, iso2c)
df_life |> filter(is.na(region)) |> distinct(country, iso2c)
df_life |> filter(region != "Aggregates" | country %in% c("Viet Nam", "Czechia")) |> distinct(country, iso2c, region, income)
INCOME <- c("Low income", "Lower middle income", "Upper middle income", "High income")
REGION <- c("South Asia", "Europe & Central Asia", "Middle East & North Africa", "East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean",  "North America")
df_life |> filter(country == "World") |>
ggplot(aes(year, life_expectancy)) + geom_line()
df_life |> filter(country == "World") |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy)) + geom_line()
df_life |> filter(country %in% c("Afghanistan", "China", "India", "Japan", "United States", "Viet Nam", "Russian Federation", "Somalia")) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line()
df_life |> filter(country %in% REGION) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line()
df_life |> filter(country %in% INCOME) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line()
df_life |> filter(country == "World") |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy)) + geom_line()
df_life |> filter(country %in% c("Afghanistan", "China", "India", "Japan", "United States", "Viet Nam", "Russian Federation", "Somalia")) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line()
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region)) + geom_point()
df_life |> filter(year == 1960) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region)) + geom_point()
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region, size = population)) + geom_point()
df_life |> filter(year == 1960) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region, size = population)) + geom_point()
df_life_revised <- df_life
df_life_revised <- df_life_revised |> mutate(
region = case_when(
is.na(region) & country == "Viet Nam" ~ "East Asia & Pacific",
is.na(region) & country == "Czechia" ~ "Europe & Central Asia",
TRUE ~ region))
df_life_revised |> filter(country %in% c("Viet Nam", "Czechia")) |> distinct(country, region)
df_life_revised <- df_life
df_life_revised$region[df_life_revised$country == "Viet Nam"] <- "East Asia & Pacific"
df_life_revised$region[df_life_revised$country == "Czechia"] <- "Europe & Central Asia"
df_life_revised |> filter(country %in% c("Viet Nam", "Czechia")) |> distinct(country, region)
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/da4r/life_expectancy.Rmd")
df_wdi_life |> select(c(1,2,4,7,8,8,10,14)) |> identical(df_life)
df_wdi_life |> select(c(1,2,4,7,8,8,10,14)) |> head()
df_wdi_life |> select(c(1,2,4,7,8,8,10,14)) |> head()
df_wdi_life |> select(c(1,2,4,7,8,8,10,11,14)) |> identical(df_life)
df_wdi_life |> select(c(1,2,4,7,8,8,10,11,13,14)) |> identical(df_life)
df_wdi_life |> select(c(1,2,4,7,8,8,10,11,13,14)) |> identical(df_life)
df_wdi_life |> select(c(1,2,4,7,8,9,10,11,13,14)) |> identical(df_life)
df_wdi_life |> select(c(1,2,4,7,8,9,10,11,14)) |> identical(df_life)
df_wdi_life |> select(c(1,2,4,7,8,9,10,14)) |> identical(df_life)
df_wdi_life |> select(c(1,2,4,7:10,14)) |> identical(df_life)
df_wdi_life |> select(
c("country", "iso2c", "year", "life_expectancy":"region", "income")) |>
identical(df_life)
df_life |> filter(country == "World") |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy)) + geom_line() +
labs(title = "The population of the World")
df_life |> filter(country == "World") |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy)) + geom_line() +
labs(title = "Population of the World")
df_life |> filter(country %in% c("Afghanistan", "China", "India", "Japan", "United States", "Viet Nam", "Russian Federation", "Somalia")) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs(title = "Population of eight countries", y = "life expectancy")
df_life |> filter(country %in% c("Afghanistan", "China", "India", "Japan", "United States", "Viet Nam", "Russian Federation", "Somalia")) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs(title = "Life expectancy of eight countries", y = "life expectancy")
df_life |> filter(country == "World") |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy)) + geom_line() +
labs(title = "Life expectancy of the World")
df_life |> filter(country %in% INCOME) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs("Life expectancy by income level")
df_life |> filter(country %in% INCOME) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs(title = "Life expectancy by income level")
df_life |> filter(country %in% REGION) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs(title = "Life expectancy by region")
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region)) + geom_point()
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region, size = population)) + geom_point()
library(tidyverse)
library(WDI)
df_wdi_life <- read_csv("data/wdi_life.csv")
head(df_wdi_life)
str(df_wdi_life)
df_life <- df_wdi_life |> select(c("country", "iso2c", "year", "life_expectancy", "fertility_rate", "population", "region", "income"))
head(df_life)
df_wdi_life |> select(c(1,2,4,7:10,14)) |> identical(df_life)
df_wdi_life |> select(
c("country", "iso2c", "year", "life_expectancy":"region", "income")) |>
identical(df_life)
df_life$region |> unique()
df_life$income |> unique()
df_life |> filter(region == "Aggregates") |> distinct(country, iso2c)
df_life |> filter(is.na(region)) |> distinct(country, iso2c)
df_life |> filter(region != "Aggregates" | country %in% c("Viet Nam", "Czechia")) |> distinct(country, iso2c, region, income)
INCOME <- c("Low income", "Lower middle income", "Upper middle income", "High income")
REGION <- c("South Asia", "Europe & Central Asia", "Middle East & North Africa", "East Asia & Pacific", "Sub-Saharan Africa", "Latin America & Caribbean",  "North America")
df_life |> filter(country == "World") |>
ggplot(aes(year, life_expectancy)) + geom_line()
df_life |> filter(country == "World") |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy)) + geom_line() +
labs(title = "Life expectancy of the World")
df_life |> filter(country %in% c("Afghanistan", "China", "India", "Japan", "United States", "Viet Nam", "Russian Federation", "Somalia")) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs(title = "Life expectancy of eight countries", y = "life expectancy")
df_life |> filter(country %in% REGION) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs(title = "Life expectancy by region")
df_life |> filter(country %in% INCOME) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line() +
labs(title = "Life expectancy by income level")
df_life |> filter(country == "World") |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy)) + geom_line()
df_life |> filter(country %in% c("Afghanistan", "China", "India", "Japan", "United States", "Viet Nam", "Russian Federation", "Somalia")) |> drop_na(life_expectancy) |>
ggplot(aes(year, life_expectancy, col = country)) + geom_line()
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region)) + geom_point()
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region)) + geom_point()
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region, size = population)) + geom_point()
df_life |> filter(year == 2021) |>
filter(region != "Aggregates") |> drop_na(fertility_rate, life_expectancy) |>
ggplot(aes(fertility_rate, life_expectancy, col = region, size = population)) + geom_point()
df_life_revised <- df_life
df_life_revised <- df_life_revised |> mutate(
region = case_when(
is.na(region) & country == "Viet Nam" ~ "East Asia & Pacific",
is.na(region) & country == "Czechia" ~ "Europe & Central Asia",
TRUE ~ region))
df_life_revised |> filter(country %in% c("Viet Nam", "Czechia")) |> distinct(country, region)
df_life_revised <- df_life
df_life_revised$region[df_life_revised$country == "Viet Nam"] <- "East Asia & Pacific"
df_life_revised$region[df_life_revised$country == "Czechia"] <- "Europe & Central Asia"
df_life_revised |> filter(country %in% c("Viet Nam", "Czechia")) |> distinct(country, region)
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/ges001/ges00100.Rmd")
