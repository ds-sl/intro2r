COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY)
COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRIES <- c("Japan", "China", "India", "United Kingdom", "United States", "Germany", "France")
df_gdp |> filter(country %in% COUNTRIES) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
ISO2C <- c("CN","US")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
df_gdp |> distinct(country, iso2c)
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY)
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = iso2c)) + geom_line()
df_gdp |> distinct(country, iso2c)
WDIsearch(string = "gdp", field = "name")
WDIsearch(string = "NY.GDP.MKTP.PP.KD", field = "indicator")
COUNTRY <- "World"
df_gdppcap |> filter(country == COUNTRY) |>
ggplot(aes(year, pop)) + geom_line()
df_gdppcap2
df_gdppcap2 <- df_gdppcap |> drop_na(pop) |>
mutate(gdppcap = gdp/pop, .before = gdp)
df_gdppcap2
COUNTRY <- "World"
df_gdppcap2 |> filter(country == COUNTRY) |>
ggplot(aes(year, gdppcap)) + geom_line()
df_gdppcap_check <- WDI(indicator = c("NY.GDP.PCAP.PP.KD", gdp = "NY.GDP.MKTP.PP.KD", pop = "SP.POP.TOTL")) |>
drop_na("NY.GDP.PCAP.PP.KD", gdp, pop) |>
mutate(gdppcap = gdp/pop, .before = gdp)
df_gdppcap_check <- WDI(indicator = c("NY.GDP.PCAP.PP.KD", gdp = "NY.GDP.MKTP.PP.KD", pop = "SP.POP.TOTL")) |>
drop_na(pop) |>
mutate(gdppcap = gdp/pop, .before = gdp)
df_gdppcap_check <- WDI(indicator = c(PCAP = "NY.GDP.PCAP.PP.KD", gdp = "NY.GDP.MKTP.PP.KD", pop = "SP.POP.TOTL")) |>
drop_na(pop) |>
mutate(gdppcap = gdp/pop, .before = gdp)
View(df_gdppcap_check)
df_gdppcap_check$PCAP == df_gdppcap_check$gdppcap
near(df_gdppcap_check$PCAP, df_gdppcap_check$gdppcap)
near(df_gdppcap_check$PCAP, df_gdppcap_check$gdppcap)
df_gdppcap_check |> drop_na(gdppcap) |> near(PCAP, gdppcap)
df_gdppcap_check |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap))
df_gdppcap_check |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap)) |> sum(near)
df_gdppcap_check |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap)) |> mean(near)
df_gdppcap_check |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap)) |> pull(near)
df_gdppcap_check |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap)) |>
summarize(sum(near))
df_gdppcap_check |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap)) |>
summarize(n = n(near), sum(near))
df_gdppcap_check |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap)) |>
summarize(n = n(), sum(near))
df_gdppcap_check <- WDI(indicator = c(PCAP = "NY.GDP.PCAP.PP.KD", gdp = "NY.GDP.MKTP.PP.KD", pop = "SP.POP.TOTL"), extra = TRUE) |>
drop_na(pop) |>
mutate(gdppcap = gdp/pop, .before = gdp)
write(df_gdppcap_check, "data/gdppcap_check")
write(df_gdppcap_check, "data/gdppcap_check.csv")
write_csv(df_gdppcap_check, "data/gdppcap_check.csv")
df_gdppcap_check <- read_csv("data/gdppcap_check.csv")
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram(bins = 20) + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram(bins = 10) + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram() + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_boxplot() + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
filter(income != "Aggregates") |>
ggplot(aes(gdppcap, fill = income)) + geom_boxplot() + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
filter(income != "Aggregates") |>
ggplot(aes(income, gdppcap, fill = income)) + geom_boxplot() + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
filter(income != "Aggregates") |>
ggplot(aes(gdppcap, income, fill = income)) + geom_boxplot() + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
filter(income != "Aggregates") |>
ggplot(aes(gdppcap, income, fill = income)) + geom_boxplot() + scale_x_log10() +
labs(fill = "")
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
filter(income != "Aggregates") |>
ggplot(aes(gdppcap, income, fill = income)) + geom_boxplot() + scale_x_log10() +
theme(legend.posiiton = "none")
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
filter(income != "Aggregates") |>
ggplot(aes(gdppcap, income, fill = income)) + geom_boxplot() + scale_x_log10() +
theme(legend.position = "none")
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdp) |>
filter(income != "Aggregates") |>
ggplot(aes(gdp, region, fill = region)) + geom_boxplot() + scale_x_log10() +
theme(legend.position = "none")
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdp, pop) |>
ggplot(aes(gdp, pop, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(gdp, pop, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
test |> ggplotly()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = coountry, shape = region)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = country, shape = region)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(color = country, shape = region, x = pop, y = gdp)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(color = country, shape = region, pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
head(df_gdp,10)
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/gs_macro.Rmd")
df_gdp |> distinct(country, iso2c)
df_gdppcap <- WDI(indicator = c(gdp = "NY.GDP.MKTP.PP.KD", pop = "SP.POP.TOTL", gdppcap = "NY.GDP.PCAP.PP.KD"), extra = TRUE)
write_csv(df_gdppcap, "data/gdppcap.csv")
COUNTRY <- "World"
df_gdppcap |> filter(country == COUNTRY) |>
ggplot(aes(year, gdppcap)) + geom_line()
df_gdppcap2 <- df_gdppcap |> drop_na(pop) |>
mutate(PCAP = gdp/pop, .after = gdppcap)
df_gdppcap2
df_gdppcap2 |> drop_na(gdppcap) |> mutate(near = near(PCAP, gdppcap)) |>
summarize(numberofdata = n(), sum(near))
df_gdppcap2 |> drop_na(gdppcap, PCAP) |> mutate(near = near(PCAP, gdppcap)) |>
summarize(numberofdata = n(), sum(near))
df_gdppcap2 |> filter(gdppcap != PCAP)
df_gdppcap2 |> filter(gdppcap != near(PCAP))
df_gdppcap2 |> filter(!near(gdppcap, PCAP))
WDIsearch(string = "NY.GDP.MKTP.PP.KD", field = "indicator", short = FALSE)
df_gdppcap |> filter(year = 2022) |> arrange(desc(gdp))
df_gdppcap |> filter(year == 2022) |> arrange(desc(gdp))
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> arrange(desc(gdp))
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> arrange(desc(gdppcap))
df_gdppcap |> filter(year == 2022, region != "Aggregates") |>
drop_na(gdp) |> arrange(desc(gdp))
df_gdppcap2 |> filter(year == 2022) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram()
df_gdppcap2 |> filter(year == 2022) |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram()
df_gdppcap2 |> filter(year == 2022) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdppcap2 |> filter(year == 2022) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram(bins = 20) + scale_x_log10()
df_gdppcap |> filter(year == 2022) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram()
df_gdppcap |> filter(year == 2022) |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram()
df_gdppcap |> filter(year == 2022) |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022) |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022) |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(gdp) |>
ggplot(aes(gdp)) + geom_histogram(bins = 20) + scale_x_log10()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram(col = region) + scale_x_log10()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram(col = region) + scale_x_log10()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022) |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram(col = region) + scale_x_log10()
df_gdppcap |> filter(year == 2022) |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022,region != "Aggregates") |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022,region != "Aggregates") |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram(fill = income) + scale_x_log10()
df_gdppcap |> filter(year == 2022,region != "Aggregates") |> drop_na(pop) |>
ggplot(aes(pop)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022,region != "Aggregates") |> drop_na(pop) |>
group_by(region) |>
ggplot(aes(pop, fill = region)) + geom_histogram() + scale_x_log10()
df_gdppcap |> filter(year == 2022,region != "Aggregates") |> drop_na(pop) |>
group_by(region) |>
ggplot(aes(pop, fill = region)) + geom_histogram(col = "black") + scale_x_log10()
df_gdppcap |> filter(year == 2022,region != "Aggregates") |> drop_na(pop) |>
group_by(region) |>
ggplot(aes(pop, fill = region)) + geom_histogram(col = "black", linewidth = 0.2) + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
ggplot(aes(gdppcap)) + geom_boxplot() + scale_x_log10()
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdppcap) |>
filter(income != "Aggregates") |>
ggplot(aes(gdppcap, income, fill = income)) + geom_boxplot() + scale_x_log10() +
theme(legend.position = "none")
df_gdppcap2 |> filter(year == 2020) |> drop_na(gdp) |>
filter(income != "Aggregates") |>
ggplot(aes(gdp, region, fill = region)) + geom_boxplot() + scale_x_log10() +
theme(legend.position = "none")
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(color = country, shape = region, pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point()
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point()
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point() +
geom_smooth(method = "lm", se = FALSE) +
scale_x_log10() + scale_y_log10()
str(df_gdppcap)
df_gdppcap |> select(region, income, lending) |> lapply(unique())
df_gdppcap |> lapply(unique(region, income, lending))
df_gdppcap |> selectregion, income, lending) |> lapply(unique)
df_gdppcap |> select(region, income, lending) |> lapply(unique)
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region, shape = income)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, shape = income, size = pop)) + geom_point() +
scale_x_log10() + scale_y_log10() + scale_size_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, shape = income, size = pop)) + geom_point() +
scale_x_log10() + scale_y_log10() + scale_size(log10())
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, shape = income, size = pop)) + geom_point() +
scale_x_log10() + scale_y_log10() + scale_size(log10(pop))
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, shape = income, size = pop)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, size = log10(pop))) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, size = pop)) + geom_point() +
scale_x_log10() + scale_y_log10()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(color = country, shape = region, pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/intro2wdi.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/intro2wdi-1.Rmd")
library(tidyverse)
library(WDI)
df_gdp <- read_csv("data/gdp.csv")
head(df_gdp)
str(df_gdp)
summary(df_gdp)
COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY)
COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRIES <- c("Japan", "China", "India", "United Kingdom", "United States", "Germany", "France")
df_gdp |> filter(country %in% COUNTRIES) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = iso2c)) + geom_line()
df_gdp |> distinct(country, iso2c)
WDIsearch(string = "gdp", field = "name")
WDIsearch(string = "NY.GDP.MKTP.PP.KD", field = "indicator", short = FALSE)
df_gdppcap <- read_csv("data/gdppcap.csv")
str(df_gdppcap)
df_gdppcap |> select(region, income, lending) |> lapply(unique)
COUNTRY <- "World"
df_gdppcap |> filter(country == COUNTRY) |>
ggplot(aes(year, gdppcap)) + geom_line()
COUNTRY <- "World"
df_gdppcap |> filter(country == COUNTRY) |>
ggplot(aes(year, pop)) + geom_line()
df_gdppcap2 <- df_gdppcap |> drop_na(pop) |>
mutate(PCAP = gdp/pop, .after = gdppcap)
df_gdppcap2
df_gdppcap2 |> filter(!near(gdppcap, PCAP))
df_gdppcap |> filter(year == 2022, region != "Aggregates") |>
drop_na(gdp) |> arrange(desc(gdp))
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point()
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point() +
geom_smooth(method = "lm", se = FALSE) +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region, shape = income)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, size = pop)) + geom_point() +
scale_x_log10() + scale_y_log10()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(color = country, shape = region, pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/intro2wdi-1.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/intro2wdi-1.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/intro2wdi-2.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/intro2wdi-2.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
library(tidyverse)
library(WDI)
library(tidyverse)
library(WDI)
library(tidyverse)
library(WDI)
Sys.setenv(LANG = "en")
df_gdp <- WDI(indicator = "NY.GDP.MKTP.PP.KD")
head(df_gdp)
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
head(df_gdp, 50)
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
str(df_gdp)
summary(df_gdp)
df_gdp
View(df_gdp)
COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY)
COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "Japan"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD)
|>
COUNTRY <- "World"
df_gdp |> filter(country == COUNTRY) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD)) + geom_line()
COUNTRIES <- c("Japan", "China", "India", "United Kingdom", "United States", "Germany", "France")
df_gdp |> filter(country %in% COUNTRIES) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = iso2c)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, colour = iso2c)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, col = iso2c)) + geom_line()
ISO2C <- c("JP", "CN", "ID", "UK", "US", "DE", "FR")
df_gdp |> filter(iso2c %in% ISO2C) |> drop_na(NY.GDP.MKTP.PP.KD) |>
ggplot(aes(year, NY.GDP.MKTP.PP.KD, color = country)) + geom_line()
(df_codes <- df_gdp |> distinct(country, iso2c))
View(df_codes)
WDIsearch(string = "gdp", field = "name")
WDIsearch(string = "NY.GDP.MKTP.PP.KD", field = "indicator", short = FALSE)
df_gdppcap <- WDI(indicator = c(gdp = "NY.GDP.MKTP.PP.KD", pop = "SP.POP.TOTL", gdppcap = "NY.GDP.PCAP.PP.KD"), extra = TRUE)
str(df_gdppcap)
df_gdppcap |> select(region, income, lending) |> lapply(unique)
COUNTRY <- "World"
df_gdppcap |> filter(country == COUNTRY) |>
ggplot(aes(year, gdppcap)) + geom_line()
COUNTRY <- "World"
df_gdppcap |> filter(country == COUNTRY) |>
ggplot(aes(year, pop)) + geom_line()
df_gdppcap2 <- df_gdppcap |>
mutate(PCAP = gdp/pop, .after = gdppcap)
df_gdppcap2
df_gdppcap2 <- df_gdppcap |> drop_na(pop) |>
mutate(PCAP = gdp/pop, .after = gdppcap)
df_gdppcap2
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
df_gdppcap2 |> drop_na(gdppcap, PCAP) |> mutate(near = near(gdppcap, PCAP)) |>
summarize(numberofdata = n(), sum(near))
df_gdppcap2 |> filter(!near(gdppcap, PCAP))
df_gdppcap2 |> filter(!near(gdppcap, PCAP)) |> unique(country)
df_gdppcap2 |> filter(!near(gdppcap, PCAP)) |> distinct(country) |> pull()
df_gdppcap |> filter(year == 2022, region != "Aggregates") |>
drop_na(gdp) |> arrange(desc(gdp))
df_gdppcap |> filter(year == 2022, region != "Aggregates") |>
drop_na(gdppcap) |> arrange(desc(gdppcap))
df_gdppcap |> filter(year == 2022, region != "Aggregates") |>
drop_na(gdppcap) |> arrange(gdppcap)
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point()
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp)) + geom_point() +
geom_smooth(method = "lm", se = FALSE) +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, pop) |>
ggplot(aes(pop, gdp, color = region, shape = income)) + geom_point() +
scale_x_log10() + scale_y_log10()
df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |>
drop_na(gdp, gdppcap, pop) |>
ggplot(aes(gdppcap, gdp, color = region, size = pop)) + geom_point() +
scale_x_log10() + scale_y_log10()
library(plotly)
test <- df_gdppcap2 |> filter(year == 2020, region !="Aggregates") |> drop_na(gdp, pop) |>
ggplot(aes(color = country, shape = region, pop, gdp)) + geom_point() +
scale_x_log10() + scale_y_log10() + theme(legend.position = "none")
test |> ggplotly()
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
df_gdppcap2 |> filter(year == 2022, region !="Aggregates") |>
drop_na(gdp, pop) |> lm(log10(gdp) ~ log10(pop), data = _) |> summary()
source("~/Documents/_class/gsclasses/intro_R/intro2r/intro2wdi/my_intro2wdi-1.Rmd")
