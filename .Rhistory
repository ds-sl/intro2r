chosen_countries <- c("United States", "France", "Japan")
WDI(country = "all", indicator = c(short_name_1 = chosen_indicator_1, short_name_2 = chosen_indicator_2), extra=TRUE, cache=wdi_cache) %>%
filter(country %in% chosen_countries) %>%
pivot_longer(c(short_name_1, short_name_2), names_to = "class", values_to = "value") %>% drop_na(value) %>%
ggplot(aes(year, value, linetype = class, col = country)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator_1, ": ", short_name_1, "\n", chosen_indicator_2, ": ", short_name_2)) +
scale_linetype_manual(labels = c(short_name_1, short_name_2), values = c("solid", "dashed"))
chosen_indicator_1 <- "SL.TLF.CACT.MA.NE.ZS"
short_name_1 <- "male"
chosen_indicator_2 <- "SL.TLF.CACT.FE.NE.ZS"
short_name_2 <- "female"
chosen_countries <- c("United States", "France", "Japan")
WDI(country = "all", indicator = c(short_name_1 = chosen_indicator_1, short_name_2 = chosen_indicator_2), extra=TRUE, cache=wdi_cache) %>%
filter(country %in% chosen_countries) %>%
pivot_longer(c(short_name_1, short_name_2), names_to = "class", values_to = "value") %>% drop_na(value) %>%
ggplot(aes(year, value, linetype = class, col = country)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator_1, ": ", short_name_1, "\n", chosen_indicator_2, ": ", short_name_2)) +
scale_linetype_manual(labels = c(short_name_1, short_name_2), values = c("solid", "dashed"))
url_indicators <- "https://ds-sl.github.io/intro2r/data/indicators.csv"
df_indicators <- read_csv(url_indicators) %>% left_join(wdi_cache$series)
write_csv(df_indicators, "./data/indicators.csv")
df_indicators %>% distinct(indicator, name) %>% arrange(indicator)
wdi_cache <- WDIcache()
write_rds(wdi_cache, "./data/wdi_cache.RData")
wdi_cache <- read_rds("./data/wdi_cache.RData")
df_military6 <- WDI(country = c("CN","GB","JP","IN","US","DE"), indicator = c(military = "MS.MIL.XPND.CD"), extra=TRUE, cache=wdi_cache)
df_military6 %>% filter(year == 2021) %>% arrange(desc(military))
df_military6 %>% drop_na(military) %>%
ggplot(aes(year, military, col=iso2c)) + geom_line()
df_military <- WDI(country = "all", indicator = c(military = "MS.MIL.XPND.CD"), extra=TRUE, cache=wdi_cache)
df_military %>% drop_na(military) %>% filter(year==2021, income=="High income", military >0) %>%
ggplot(aes(military, fill=region)) + geom_density() + geom_vline(xintercept = 54123551702, col="red") + scale_x_log10() + geom_label(x=11.1, y=25, label = "Japan") + facet_wrap(~region) + theme(legend.position = "none") + labs(title="Military Expenses in high income countries")
df_military_gdp <- WDI(country = "all", indicator = c(military_gdp = "MS.MIL.XPND.GD.ZS"), extra=TRUE, cache=wdi_cache)
df_military_gdp %>% filter(country == "Japan", year==2021)
df_military_gdp %>% drop_na(military_gdp) %>% filter(year==2021, income!="Aggregates") %>%
ggplot(aes(military_gdp, fill=income)) + geom_density(binwidth = 0.2, alpha=0.5) + geom_vline(xintercept = 2, col="red") + geom_vline(xintercept = 1, col="blue") + facet_wrap(~income)
url_un_pop <- "https://data.un.org/_Docs/SYB/CSV/SYB65_1_202209_Population,%20Surface%20Area%20and%20Density.csv"
df_un_pop0 <- read_csv(url_un_pop)
df_un_pop0
url_un_pop <- "https://data.un.org/_Docs/SYB/CSV/SYB65_1_202209_Population,%20Surface%20Area%20and%20Density.csv"
df_un_pop <- read_csv(url_un_pop, skip=1)
df_un_pop
df_un_pop %>% distinct(`Region/Country/Area`, `...2`)
df_un_pop %>% filter(`Region/Country/Area` %in% c(2,19,142,150,9), Series == "Population mid-year estimates (millions)") %>%
ggplot(aes(Year, Value, fill = `...2`)) + geom_area(col="black") +
labs(title = "Population mid-year estimates (millions) of the World")
df_oecd_productivity <- read_csv("./data/DP_LIVE_21022023111712065.csv")
df_oecd_productivity
colnames(df_oecd_productivity)
df_oecd_productivity$LOCATION %>% unique()
df_oecd_productivity$INDICATOR %>% unique()
df_oecd_productivity$SUBJECT %>% unique()
df_oecd_productivity$MEASURE %>% unique()
df_oecd_productivity$FREQUENCY %>% unique()
df_oecd_productivity$TIME %>% unique()
df_oecd_productivity %>%
filter(MEASURE == "USD", TIME == 2021) %>% # filtering rows with conditions
select(LOCATION, Value) %>% # selecting columns
arrange(desc(Value)) # ordering the rows in the descenting order of the column Value
df_oecd_productivity %>%
filter(LOCATION %in% c("JPN", "OECD", "G-7", "EU28")) %>%
filter(MEASURE == "USD") %>% # same as above up to this line
ggplot(aes(x = TIME, y = Value, col = LOCATION)) + geom_line() +
labs(title="GDP per hour worked", # adding the title and the subtitle
subtitle="Total, 2015=100, 2021 or latest available")
df_oecd_education_level <- read_csv("./data/DP_LIVE_21022023120132654.csv")
df_oecd_education_level
colnames(df_oecd_education_level)
df_oecd_education_level$SUBJECT %>% unique()
df_oecd_education_level %>%
filter(LOCATION %in% c("JPN", "OECD", "G-7", "EU28")) %>%
ggplot(aes(TIME, Value, linetype = SUBJECT, col = LOCATION)) + geom_line() +
labs(title="Adult education level")
library(readxl) # need to load though readxl is a part of the tidyverse package and installed
excel_sheets("./data/Age-specific fertility rates, Total fertility and .xls")
df_un_fertility <- read_excel("./data/Age-specific fertility rates, Total fertility and .xls")
df_un_fertility
df_un_fertility <- read_excel("./data/Age-specific fertility rates, Total fertility and .xls",
col_types = c("text", "numeric", "text",
"numeric", "text", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "numeric", "numeric",
"numeric", "skip", "text", "skip",
"skip", "skip", "skip", "skip", "skip"),
skip = 4)
df_un_fertility <- read_excel("./data/Age-specific fertility rates, Total fertility and .xls",
col_types = c("text", "numeric", "text",
"numeric", "text", rep("numeric", 9), "skip", "text",rep("skip", 6)),
skip = 4)
df_un_fertility
colnames(df_un_fertility)[c(1:6,14:15)] <- c("country",	"iso",	"period","year", "range",	"fertility_rate","mean_age","source")
df_un_fertility
df_un_fertility_jp <- df_un_fertility %>% filter(country == "Japan")
df_un_fertility_jp
df_un_fertility_jp %>% pivot_longer(-c(1:6, 14:15), names_to = "age_range", values_to = "value")
df_un_fertility_jp %>% pivot_longer(-c(1:6, 14:15), names_to = "age_range", values_to = "value") %>%
ggplot(aes(x=year, col=age_range, linetype = age_range)) + geom_line(aes(y=value))
df_un_fertility %>%
filter(year %in% c(2010)) %>% select(country, mean_age) %>%
drop_na(mean_age) %>%
arrange(desc(mean_age))
df_un_fertility %>% filter(year %in% c(1970, 1990, 2010)) %>%
drop_na(mean_age) %>%
ggplot(aes(mean_age, fill = factor(year))) + geom_density(alpha = 0.5) +
#  scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +
#  coord_cartesian(xlim=c(20,40)) +
labs(title="Mean age at childbearing", fill = "year")
df_un_fertility %>% drop_na(mean_age) %>% group_by(year) %>% summarise(n=n()) %>% arrange(desc(n))
df_un_fertility %>% filter(year %in% c(1970, 1985, 1995, 2005, 2010)) %>%
drop_na(mean_age) %>%
ggplot(aes(mean_age, fill = factor(year))) + geom_density(alpha = 0.3) +
labs(title="Mean age at childbearing", fill = "year")
df_un_fertility %>% filter(year %in% c(1970, 1985,1995, 2005,2010)) %>%
drop_na(mean_age) %>%
ggplot(aes(mean_age, fill = factor(year))) + geom_density(alpha = 0.5) + facet_wrap(~ factor(year)) +
labs(title="Mean age at childbearing", fill = "year")
df_un_fertility %>%
filter(year %in% c(2010)) %>% select(country, fertility_rate) %>%
drop_na(fertility_rate) %>%
arrange(fertility_rate)
df_un_fertility %>% filter(year %in% c(1970, 1990, 2010)) %>%
drop_na(mean_age) %>%
ggplot(aes(fertility_rate, fill = factor(year))) + geom_density(alpha = 0.5) +
labs(title="Total fertility", fill = "year")
df_un_fertility %>% drop_na(fertility_rate) %>% group_by(year) %>% summarise(n=n()) %>% arrange(desc(n))
df_un_fertility %>% filter(year %in% c(1970, 1985, 1995, 2005, 2010)) %>%
drop_na(mean_age) %>%
ggplot(aes(fertility_rate, fill = factor(year))) + geom_density(alpha = 0.5) +
labs(title="Total fertility", fill = "year")
df_un_fertility %>% filter(year %in% c(1970, 1985, 1995, 2005, 2010)) %>%
drop_na(mean_age) %>%
ggplot(aes(fertility_rate, fill = factor(year))) + geom_density(alpha = 0.5) + facet_wrap(~ factor(year)) +
labs(title="Total fertility", fill = "year")
url_school_jp <- "https://www.gender.go.jp/about_danjo/whitepaper/r02/zentai/html/honpen/csv/zuhyo01-04-01.csv"
guess_encoding(url_school_jp, n_max = 10000, threshold = 0.2)
df_school_jp <- read_csv(url_school_jp, locale = locale(encoding = "Shift_JIS"), skip=2)
df_school_jp
df_edu0 <- df_school_jp
colnames(df_edu0) <- c("year", "highschool_m", "highschool_f", "vocational_m", "vocational_f", "university_m", "university_f", "juniorcollege_f", "gradschool_m", "gradschool_f")
df_edu00 <- df_edu0 %>% mutate(year = 1950:2019,
highschool = (highschool_m + highschool_f)/2,
vocational = (vocational_m + vocational_f)/2,
university = (university_m + university_f)/2,
juniorcollege = juniorcollege_f,
gradschool = (gradschool_m + gradschool_f)/2)
df_edu00 %>% filter(year >= 1954) %>% select(-(2:10)) %>%
pivot_longer(3:5, names_to = "schools", values_to = "percentage") %>%
mutate(types = factor(schools, levels = c("vocational", "juniorcollege", "university"))) %>%
pivot_longer(c(highschool, gradschool), names_to = "highgrad", values_to ="value") %>%
mutate(high_grad = factor(highgrad, levels = c("highschool", "gradschool"))) %>%
ggplot() +
geom_area(aes(x = year, y = percentage, fill = types)) +
geom_line(aes(x = year, y = value, linetype = high_grad)) +
scale_x_continuous(breaks = round(seq(1960, 2020, by =10),1)) +
scale_y_continuous(breaks = round(seq(0, 100, by =10),1)) +
labs(title = "Tertially Education After Highschool",
subtitle = "with Highschool Graduates and Graduate School",
fill = "", linetype = "")
df_wdi_gdppcap <- read_csv("./data/df_wdi_gdppcap.csv")
df_wdi_gdppcap
df_wdi_gdppcap_small <- df_wdi_gdppcap %>%
select(country, year, gdp_pcap)
df_wdi_gdppcap_small
df_wdi_gdppcap_short <- df_wdi_gdppcap %>%
filter(country %in% c("Japan", "Germany", "United States"))
df_wdi_gdppcap_short
df_wdi_gdppcap_small_short <- df_wdi_gdppcap %>% select(country, year, gdp_pcap) %>%
filter(country %in% c("Japan", "Germany", "United States"))
df_wdi_gdppcap_small_short
df_wdi_gdppcap_small_short %>%
ggplot(aes(x = year, y = gdp_pcap)) + geom_line()
df_wdi_gdppcap_small_short %>% filter(country %in% c("Japan")) %>%
ggplot(aes(x = year, y = gdp_pcap)) + geom_line()
df_wdi_gdppcap_small_short %>%
ggplot(aes(x = year, y = gdp_pcap)) + geom_point()
df_wdi_gdppcap_small_short %>% drop_na(gdp_pcap) %>%
ggplot(aes(x = year, y = gdp_pcap, col = country)) + geom_line()
df_wdi_gdppcap_small_short %>% drop_na(gdp_pcap) %>%
ggplot(aes(x = year, y = gdp_pcap, col = country)) + geom_line() +
geom_point()
df_wdi_gdppcap_small_short %>% drop_na(gdp_pcap) %>%
ggplot(aes(x = year, y = gdp_pcap)) +
geom_point(aes(color = country)) +
geom_smooth(method = 'loess', formula = 'y ~ x')
df_gdp <- WDI(country = "all",
indicator = c(gdp = "NY.GDP.MKTP.CD"),
extra = TRUE)
head(df_gdp)
str(df_gdp)
summary(df_gdp)
df_gdp %>% distinct(country) %>% pull()
df_gdp %>% distinct(country) %>% pull()
```
df_gdp %>% distinct(country) %>% pull()
```
df_gdp %>% filter(country == "Japan")
df_gdp %>% filter(country == "Japan") %>% head(2)
df_gdp %>% filter(country == "Japan") %>%
ggplot(aes(x = year, y = gdp)) + geom_line()
df_gdp %>% drop_na(gdp) %>% ggplot(aes(x = year)) + geom_bar()
df_gdp %>% filter(year == 2021) %>% drop_na(gdp) %>% arrange(desc(gdp))
df_gdp %>% filter(year == 2021, region != "Aggregates") %>%
drop_na(gdp) %>% arrange(desc(gdp))
df_gdp %>% filter(iso2c %in% c("US", "CN", "JP", "DE", "IN", "GB", "FR")) %>%
ggplot(aes(x = year, y = gdp, col = iso2c)) + geom_line()
df_gdp %>%
filter(region != "Aggregates") %>%
drop_na(gdp) %>%
group_by(year) %>%
mutate(gdp_ratio = gdp/sum(gdp)) %>%
ungroup() %>%
filter(iso2c %in% c("US", "CN", "JP", "DE", "IN", "GB", "FR"))  %>%
ggplot(aes(x = year, y = gdp_ratio, fill = iso2c)) + geom_area() + geom_line(col = "black", position = "stack", linewidth = 0.3) +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
df_gdp %>%
filter(region != "Aggregates") %>%
drop_na(gdp) %>%
group_by(year) %>%
mutate(gdp_ratio = gdp/sum(gdp)) %>%
ungroup() %>%
filter(iso2c %in% c("US", "CN", "JP", "DE", "IN", "GB", "FR"))  %>%
mutate(iso2co = factor(iso2c, levels = c("IN", "CN", "FR", "GB", "DE", "JP", "US"))) %>%
ggplot(aes(x = year, y = gdp_ratio, fill = iso2co)) + geom_area() + geom_line(col = "black", position = "stack", linewidth = 0.3) +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram(binwidth = 0.5) + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram(bins = 20) + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_density() + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year %in% c(1961, 1971, 1981, 1991, 2001, 2011, 2021)) %>%
ggplot(aes(gdp, fill = factor(year))) + geom_density(alpha = 0.4) + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year %in% c(1971, 1981, 1991, 2001, 2011, 2021)) %>%
ggplot(aes(gdp, fill = factor(year))) +
geom_density() + scale_x_log10() + facet_wrap(~year)
df_gdp %>% drop_na(gdp) %>%
filter(region != "Aggregates") %>%
drop_na(region) %>%
filter(year %in% c(2021)) %>%
ggplot(aes(gdp, region, fill = region)) +
geom_boxplot() + scale_x_log10() + labs(y = "") +
theme(legend.position = "none")
df_gdp %>% drop_na(gdp) %>%
filter(region != "Aggregates") %>%
drop_na(income) %>%
filter(year %in% c(2021)) %>%
mutate(level = factor(income, c("High income", "Upper middle income", "Lower middle income", "Low income"))) %>%
ggplot(aes(gdp, level, fill = income)) +
geom_boxplot() + scale_x_log10() + labs(y = "") +
theme(legend.position = "none")
library(maps)
map_world <- map_data('world')
map_gdp <- map_world %>%
mutate(iso2c = iso.alpha(region, n=2)) %>%
mutate(map_region = region) %>% select(-region) %>%
left_join(df_gdp, by = "iso2c")
head(map_gdp)
map_gdp %>% mutate(income_level = factor(income, levels = c("High income", "Upper middle income", "Lower middle income", "Low income", "Not classified", NA))) %>%
ggplot() +
geom_map(aes(long, lat, map_id = map_region, fill = income_level), map = map_world, col = "black", size = 0.1)
map_gdp %>% mutate(income_level = factor(income, levels = c("High income", "Upper middle income", "Lower middle income", "Low income", "Not classified", NA))) %>%
filter(year == 2021) %>%
ggplot() +
geom_map(aes(long, lat, map_id = map_region, fill = gdp), map = map_world, col = "black", size = 0.1)
map_gdp %>% mutate(income_level = factor(income, levels = c("High income", "Upper middle income", "Lower middle income", "Low income", "Not classified", NA))) %>%
filter(year == 2021) %>%
ggplot() +
geom_map(aes(x=long, y=lat, map_id = map_region, fill = gdp), map = map_world, col = "black", size = 0.1)
map_gdp %>% mutate(income_level = factor(income, levels = c("High income", "Upper middle income", "Lower middle income", "Low income", "Not classified", NA))) %>%
filter(year == 2021) %>%
ggplot() +
geom_map(aes(x=long, y=lat, map_id = map_region, fill = gdp), map = map_world, col = "black", size = 0.1)
df_gdp %>% distinct(country) %>% pull()
```
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gnppcap <- WDI(country = "all",
indicator = c(gnppcap = "NY.GNP.PCAP.CD"),
extra = TRUE)
head(df_gnppcap)
df_gnppcap <- WDI(country = "all",
indicator = c(gnppcap = "NY.GNP.PCAP.CD"),
extra = TRUE)
df_gnppcap
df_gdp %>% distinct(country) %>% pull()
```
df_gdp %>% distinct(country) %>% pull()
Sys.setenv(LANG = "en")
library(tidyverse)
library(WDI)
df_gdp <- WDI(country = "all",
indicator = c(gdp = "NY.GDP.MKTP.CD"),
extra = TRUE)
head(df_gdp)
str(df_gdp)
summary(df_gdp)
df_gdp %>% distinct(country) %>% pull()
df_gdp %>% filter(country == "Japan")
df_gdp %>% filter(country == "Japan") %>% head(2)
df_gdp %>% filter(country == "Japan") %>%
ggplot(aes(x = year, y = gdp)) + geom_line()
df_gdp %>% drop_na(gdp) %>% ggplot(aes(x = year)) + geom_bar()
df_gdp %>% filter(year == 2021) %>% drop_na(gdp) %>% arrange(desc(gdp))
df_gdp %>% filter(year == 2021, region != "Aggregates") %>%
drop_na(gdp) %>% arrange(desc(gdp))
df_gdp %>% filter(iso2c %in% c("US", "CN", "JP", "DE", "IN", "GB", "FR")) %>%
ggplot(aes(x = year, y = gdp, col = iso2c)) + geom_line()
df_gdp %>%
filter(region != "Aggregates") %>% drop_na(gdp) %>%
group_by(year) %>% mutate(gdp_ratio = gdp/sum(gdp)) %>% ungroup() %>%
filter(iso2c %in% c("US", "CN", "JP", "DE", "IN", "GB", "FR"))  %>%
ggplot(aes(x = year, y = gdp_ratio, fill = iso2c)) + geom_area() +
geom_line(col = "black", position = "stack", linewidth = 0.3) +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
df_gdp %>%
filter(region != "Aggregates") %>% drop_na(gdp) %>%
group_by(year) %>% mutate(gdp_ratio = gdp/sum(gdp)) %>% ungroup() %>%
filter(iso2c %in% c("US", "CN", "JP", "DE", "IN", "GB", "FR"))  %>%
mutate(iso2co = factor(iso2c, levels = c("IN", "CN", "FR", "GB", "DE", "JP", "US"))) %>%
ggplot(aes(x = year, y = gdp_ratio, fill = iso2co)) + geom_area() +
geom_line(col = "black", position = "stack", linewidth = 0.3) +
scale_y_continuous(labels = scales::percent_format(accuracy = 1))
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_histogram() + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year == 2021) %>%
ggplot(aes(gdp)) + geom_density() + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year %in% c(1961, 1971, 1981, 1991, 2001, 2011, 2021)) %>%
ggplot(aes(gdp, fill = factor(year))) + geom_density(alpha = 0.4) + scale_x_log10()
df_gdp %>% drop_na(gdp) %>%
filter(year %in% c(1971, 1981, 1991, 2001, 2011, 2021)) %>%
ggplot(aes(gdp, fill = factor(year))) +
geom_density() + scale_x_log10() + facet_wrap(~year)
df_gdp %>% drop_na(gdp) %>% filter(region != "Aggregates") %>%
drop_na(region) %>% filter(year %in% c(2021)) %>%
ggplot(aes(gdp, region, fill = region)) +
geom_boxplot() + scale_x_log10() + labs(y = "") +
theme(legend.position = "none")
df_gdp %>% drop_na(gdp) %>% filter(region != "Aggregates") %>%
drop_na(income) %>% filter(year %in% c(2021)) %>%
mutate(level = factor(income, c("High income", "Upper middle income", "Lower middle income", "Low income"))) %>%
ggplot(aes(gdp, level, fill = income)) +
geom_boxplot() + scale_x_log10() + labs(y = "") +
theme(legend.position = "none")
library(maps)
map_world <- map_data('world')
map_gdp <- map_world %>%
mutate(iso2c = iso.alpha(region, n=2)) %>%
mutate(map_region = region) %>% select(-region) %>%
left_join(df_gdp, by = "iso2c")
head(map_gdp)
map_gdp %>% mutate(income_level = factor(income, levels = c("High income", "Upper middle income", "Lower middle income", "Low income", "Not classified", NA))) %>%
ggplot() +
geom_map(aes(long, lat, map_id = map_region, fill = income_level), map = map_world, col = "black", size = 0.1)
map_gdp %>% mutate(income_level = factor(income, levels = c("High income", "Upper middle income", "Lower middle income", "Low income", "Not classified", NA))) %>%
filter(year == 2021) %>%
ggplot() +
geom_map(aes(x=long, y=lat, map_id = map_region, fill = gdp), map = map_world, col = "black", size = 0.1)
WDIsearch(string = "gdp", field = "name", short = TRUE, cache = NULL)
WDIsearch(string = "military expenditure", field = "name", short = TRUE, cache = NULL)
WDIsearch(string = "NY.GDP.MKTP.CD", field = "indicator", short = TRUE, cache = NULL)
WDIsearch(string = "", field = "name", short = TRUE, cache = NULL)
WDIsearch(string = "", field = "indicator", short = TRUE, cache = NULL)
wdi_cache <- read_rds("./data/wdi_cache.RData")
WDIsearch(string = "CPI Price", field = "name", short = FALSE, cache = wdi_cache)
WDIsearch(string = "NY.GDP.MKTP.KD.ZG", field = "indicator", short = FALSE, cache = wdi_cache)
df_gdp1 <- WDI(country = "all", indicator = "NY.GDP.MKTP.CD")
df_gdp1
df_gdp2 <- WDI(country = "all", indicator = c(gdp = "NY.GDP.MKTP.CD"))
df_gdp2
df_gdp3 <- WDI(country = "all", indicator = c(gdp = "NY.GDP.MKTP.CD"), extra=TRUE, cache=wdi_cache)
df_gdp3
df_gdp4 <- WDI(country = c("CN","GB","JP","IN","US","DE"), indicator = c(gdp = "NY.GDP.MKTP.CD"), extra=TRUE, cache=wdi_cache)
df_gdp4
df_gdp21 <- WDI(country = "all",
indicator = c(gdp_deflator = "NY.GDP.DEFL.KD.ZG",
cpi_price = "CPTOTNSXN"),
extra=TRUE, cache=wdi_cache)
df_gdp21
str(df_gdp21)
summary(df_gdp21)
df_gdp4 %>% ggplot(aes(year, gdp, col=country)) + geom_line()
df_gdp4 %>% drop_na(gdp) %>%
ggplot(aes(year, gdp, col=country)) + geom_line() +
labs(title = paste("WDI - NY.GDP.MKTP.CD: ", "gdp"))
chosen_indicator <- "SL.UEM.TOTL.NE.ZS"
short_name <- "unemployment"
chosen_country <- "United States"
WDI(country = "all", indicator = c(short_name = chosen_indicator), extra=TRUE, cache=wdi_cache) %>%
filter(country == chosen_country) %>%
ggplot(aes(year, short_name)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator, ": ", short_name, " - ", chosen_country),
y = short_name)
chosen_indicator <- "SL.UEM.TOTL.NE.ZS"
chosen_country <- "United States"
WDI(country = "all", indicator = c(chosen_indicator = chosen_indicator),
extra=TRUE, cache=wdi_cache) %>%
filter(country == chosen_country) %>%
ggplot(aes(year, chosen_indicator)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator, " - ", chosen_country),
y = chosen_indicator)
chosen_indicator <- "SL.UEM.TOTL.NE.ZS"
short_name <- "unemployment"
chosen_countries <- c("United States","United Kingdom", "Japan")
WDI(country = "all", indicator = c(short_name = chosen_indicator), extra=TRUE, cache=wdi_cache) %>% drop_na(short_name) %>%
filter(country %in% chosen_countries) %>%
ggplot(aes(year, short_name, col = country)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator, ": ", short_name), y = short_name)
chosen_indicator_1 <- "NY.GDP.DEFL.KD.ZG"
short_name_1 <- "gdp_deflator"
chosen_indicator_2 <- "CPTOTSAXNZGY"
short_name_2 <- "cpi_price"
chosen_country <- "United States"
WDI(country = "all", indicator = c(short_name_1 = chosen_indicator_1, short_name_2 = chosen_indicator_2), extra=TRUE, cache=wdi_cache) %>%
filter(country == chosen_country) %>%
pivot_longer(c(short_name_1, short_name_2), names_to = "class", values_to = "value") %>% drop_na(value) %>%
ggplot(aes(year, value, col = class)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator_1, ": ", short_name_1, "\n", chosen_indicator_2, ": ", short_name_2, " - ", chosen_country)) +
scale_color_manual(labels = c(short_name_1, short_name_2), values = scales::hue_pal()(2))
chosen_indicator_1 <- "SL.TLF.CACT.MA.NE.ZS"
short_name_1 <- "male"
chosen_indicator_2 <- "SL.TLF.CACT.FE.NE.ZS"
short_name_2 <- "female"
chosen_country <- "United States"
WDI(country = "all", indicator = c(short_name_1 = chosen_indicator_1, short_name_2 = chosen_indicator_2), extra=TRUE, cache=wdi_cache) %>%
filter(country == chosen_country) %>%
pivot_longer(c(short_name_1, short_name_2), names_to = "class", values_to = "value") %>% drop_na(value) %>%
ggplot(aes(year, value, col = class)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator_1, ": ", short_name_1, "\n", chosen_indicator_2, ": ", short_name_2, " - ", chosen_country)) +
scale_color_manual(labels = c(short_name_1, short_name_2), values = scales::hue_pal()(2))
chosen_indicator_1 <- "NY.GDP.DEFL.KD.ZG"
short_name_1 <- "gdp_deflator"
chosen_indicator_2 <- "CPTOTSAXNZGY"
short_name_2 <- "cpi_price"
chosen_countries <- c("United States", "France", "Japan")
WDI(country = "all", indicator = c(short_name_1 = chosen_indicator_1, short_name_2 = chosen_indicator_2), extra=TRUE, cache=wdi_cache) %>%
filter(country %in% chosen_countries) %>%
pivot_longer(c(short_name_1, short_name_2), names_to = "class", values_to = "value") %>% drop_na(value) %>%
ggplot(aes(year, value, linetype = class, col = country)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator_1, ": ", short_name_1, "\n", chosen_indicator_2, ": ", short_name_2)) +
scale_linetype_manual(labels = c(short_name_1, short_name_2), values = c("solid", "dashed"))
chosen_indicator_1 <- "SL.TLF.CACT.MA.NE.ZS"
short_name_1 <- "male"
chosen_indicator_2 <- "SL.TLF.CACT.FE.NE.ZS"
short_name_2 <- "female"
chosen_countries <- c("United States", "France", "Japan")
WDI(country = "all", indicator = c(short_name_1 = chosen_indicator_1, short_name_2 = chosen_indicator_2), extra=TRUE, cache=wdi_cache) %>%
filter(country %in% chosen_countries) %>%
pivot_longer(c(short_name_1, short_name_2), names_to = "class", values_to = "value") %>% drop_na(value) %>%
ggplot(aes(year, value, linetype = class, col = country)) + geom_line() +
labs(title = paste("WDI ", chosen_indicator_1, ": ", short_name_1, "\n", chosen_indicator_2, ": ", short_name_2)) +
scale_linetype_manual(labels = c(short_name_1, short_name_2), values = c("solid", "dashed"))
url_indicators <- "https://ds-sl.github.io/intro2r/data/indicators.csv"
df_indicators <- read_csv(url_indicators) %>% left_join(wdi_cache$series)
write_csv(df_indicators, "./data/indicators.csv")
df_indicators %>% distinct(indicator, name) %>% arrange(indicator)
wdi_cache <- WDIcache()
write_rds(wdi_cache, "./data/wdi_cache.RData")
wdi_cache <- read_rds("./data/wdi_cache.RData")
df_military6 <- WDI(country = c("CN","GB","JP","IN","US","DE"), indicator = c(military = "MS.MIL.XPND.CD"), extra=TRUE, cache=wdi_cache)
df_military6 %>% filter(year == 2021) %>% arrange(desc(military))
df_military6 %>% drop_na(military) %>%
ggplot(aes(year, military, col=iso2c)) + geom_line()
df_military <- WDI(country = "all", indicator = c(military = "MS.MIL.XPND.CD"), extra=TRUE, cache=wdi_cache)
df_military %>% drop_na(military) %>% filter(year==2021, income=="High income", military >0) %>%
ggplot(aes(military, fill=region)) + geom_density() + geom_vline(xintercept = 54123551702, col="red") + scale_x_log10() + geom_label(x=11.1, y=25, label = "Japan") + facet_wrap(~region) + theme(legend.position = "none") + labs(title="Military Expenses in high income countries")
df_military_gdp <- WDI(country = "all", indicator = c(military_gdp = "MS.MIL.XPND.GD.ZS"), extra=TRUE, cache=wdi_cache)
df_military_gdp %>% filter(country == "Japan", year==2021)
df_military_gdp %>% drop_na(military_gdp) %>% filter(year==2021, income!="Aggregates") %>%
ggplot(aes(military_gdp, fill=income)) + geom_density(binwidth = 0.2, alpha=0.5) + geom_vline(xintercept = 2, col="red") + geom_vline(xintercept = 1, col="blue") + facet_wrap(~income)
df_gnppcap <- WDI(country = "all",
indicator = c(gnppcap = "NY.GNP.PCAP.CD"),
extra = TRUE)
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/first_ds.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/first_ds.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/first_ds.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/first_ds.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/first_ds.Rmd")
source("~/Documents/_class/gsclasses/intro_R/intro2r/docs/first_ds.Rmd")
?WDIsearch
WDIsearch(string = "CPI Price", field = "name", short = FALSE, cache = NULL)
library(ggplot2)
# Import the data
data <- read.csv("https://data.worldbank.org/indicator/NY.GDP.MKTP.CD?locations=JP&end=2021&start=1960")
# Create a line graph
ggplot(data, aes(x = year, y = gdp)) +
geom_line() +
labs(title = "Japanese GDP from 1960-2021", x = "Year", y = "GDP (USD)")
head(data)
